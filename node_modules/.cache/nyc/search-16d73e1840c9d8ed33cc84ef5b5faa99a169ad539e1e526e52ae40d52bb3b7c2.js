function cov_24ij0adhyq(){var path="C:\\Users\\kenne\\Downloads\\DEVOPS\\DevOps-Part2\\DevOps-Project\\Util\\search.js";var hash="c275b1595621c14417e4de69e612c955552e4c6b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\kenne\\Downloads\\DEVOPS\\DevOps-Part2\\DevOps-Project\\Util\\search.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:11},end:{line:3,column:24}},"3":{start:{line:4,column:13},end:{line:4,column:28}},"4":{start:{line:7,column:15},end:{line:7,column:54}},"5":{start:{line:11,column:17},end:{line:11,column:49}},"6":{start:{line:12,column:4},end:{line:12,column:28}},"7":{start:{line:16,column:0},end:{line:44,column:3}},"8":{start:{line:17,column:22},end:{line:17,column:31}},"9":{start:{line:19,column:4},end:{line:21,column:5}},"10":{start:{line:20,column:8},end:{line:20,column:78}},"11":{start:{line:23,column:15},end:{line:23,column:29}},"12":{start:{line:26,column:20},end:{line:28,column:5}},"13":{start:{line:27,column:8},end:{line:27,column:94}},"14":{start:{line:30,column:4},end:{line:32,column:5}},"15":{start:{line:31,column:8},end:{line:31,column:88}},"16":{start:{line:35,column:27},end:{line:38,column:24}},"17":{start:{line:36,column:21},end:{line:36,column:62}},"18":{start:{line:37,column:18},end:{line:37,column:71}},"19":{start:{line:37,column:39},end:{line:37,column:70}},"20":{start:{line:40,column:4},end:{line:43,column:7}},"21":{start:{line:46,column:0},end:{line:46,column:24}}},fnMap:{"0":{name:"readDatabase",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:24},end:{line:13,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:31},end:{line:16,column:32}},loc:{start:{line:16,column:45},end:{line:44,column:1}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:37},end:{line:26,column:38}},loc:{start:{line:27,column:8},end:{line:27,column:94}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:36,column:16},end:{line:36,column:17}},loc:{start:{line:36,column:21},end:{line:36,column:62}},line:36},"4":{name:"(anonymous_4)",decl:{start:{line:37,column:13},end:{line:37,column:14}},loc:{start:{line:37,column:18},end:{line:37,column:71}},line:37},"5":{name:"(anonymous_5)",decl:{start:{line:37,column:34},end:{line:37,column:35}},loc:{start:{line:37,column:39},end:{line:37,column:70}},line:37}},branchMap:{"0":{loc:{start:{line:19,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:21,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:19},"1":{loc:{start:{line:27,column:8},end:{line:27,column:94}},type:"binary-expr",locations:[{start:{line:27,column:8},end:{line:27,column:40}},{start:{line:27,column:44},end:{line:27,column:94}}],line:27},"2":{loc:{start:{line:30,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:32,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c275b1595621c14417e4de69e612c955552e4c6b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_24ij0adhyq=function(){return actualCoverage;};}return actualCoverage;}cov_24ij0adhyq();const express=(cov_24ij0adhyq().s[0]++,require('express'));const router=(cov_24ij0adhyq().s[1]++,express.Router());const fs=(cov_24ij0adhyq().s[2]++,require('fs'));const path=(cov_24ij0adhyq().s[3]++,require('path'));// Path to the database file
const dbPath=(cov_24ij0adhyq().s[4]++,path.join(__dirname,'../data/db.json'));// Helper function to read the database
function readDatabase(){cov_24ij0adhyq().f[0]++;const data=(cov_24ij0adhyq().s[5]++,fs.readFileSync(dbPath,'utf-8'));cov_24ij0adhyq().s[6]++;return JSON.parse(data);}// GET endpoint to search for a student by ID or name
cov_24ij0adhyq().s[7]++;router.get('/students/search',(req,res)=>{cov_24ij0adhyq().f[1]++;const{query}=(cov_24ij0adhyq().s[8]++,req.query);// Query parameter
cov_24ij0adhyq().s[9]++;if(!query){cov_24ij0adhyq().b[0][0]++;cov_24ij0adhyq().s[10]++;return res.status(400).json({error:"Query parameter is required"});}else{cov_24ij0adhyq().b[0][1]++;}const db=(cov_24ij0adhyq().s[11]++,readDatabase());// Search for the student
const student=(cov_24ij0adhyq().s[12]++,db.students.find(s=>{cov_24ij0adhyq().f[2]++;cov_24ij0adhyq().s[13]++;return(cov_24ij0adhyq().b[1][0]++,s.studentID.toString()===query)||(cov_24ij0adhyq().b[1][1]++,s.name.toLowerCase().includes(query.toLowerCase()));}));cov_24ij0adhyq().s[14]++;if(!student){cov_24ij0adhyq().b[2][0]++;cov_24ij0adhyq().s[15]++;return res.status(404).json({error:"No student found with that ID or name"});}else{cov_24ij0adhyq().b[2][1]++;}// Find classes the student is enrolled in
const studentClasses=(cov_24ij0adhyq().s[16]++,db.enrollment.filter(e=>{cov_24ij0adhyq().f[3]++;cov_24ij0adhyq().s[17]++;return e.enrolledStudentID===student.studentID;}).map(e=>{cov_24ij0adhyq().f[4]++;cov_24ij0adhyq().s[18]++;return db.classes.find(c=>{cov_24ij0adhyq().f[5]++;cov_24ij0adhyq().s[19]++;return c.classID===e.enrolledClassID;});}).filter(Boolean));cov_24ij0adhyq().s[20]++;res.status(200).json({student,classes:studentClasses});});cov_24ij0adhyq().s[21]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjRpajBhZGh5cSIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZnMiLCJwYXRoIiwiZGJQYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsInJlYWREYXRhYmFzZSIsImYiLCJkYXRhIiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsInBhcnNlIiwiZ2V0IiwicmVxIiwicmVzIiwicXVlcnkiLCJiIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZGIiLCJzdHVkZW50Iiwic3R1ZGVudHMiLCJmaW5kIiwic3R1ZGVudElEIiwidG9TdHJpbmciLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInN0dWRlbnRDbGFzc2VzIiwiZW5yb2xsbWVudCIsImZpbHRlciIsImUiLCJlbnJvbGxlZFN0dWRlbnRJRCIsIm1hcCIsImNsYXNzZXMiLCJjIiwiY2xhc3NJRCIsImVucm9sbGVkQ2xhc3NJRCIsIkJvb2xlYW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic2VhcmNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuXHJcbi8vIFBhdGggdG8gdGhlIGRhdGFiYXNlIGZpbGVcclxuY29uc3QgZGJQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2RhdGEvZGIuanNvbicpO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHJlYWQgdGhlIGRhdGFiYXNlXHJcbmZ1bmN0aW9uIHJlYWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZGJQYXRoLCAndXRmLTgnKTtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xyXG59XHJcblxyXG4vLyBHRVQgZW5kcG9pbnQgdG8gc2VhcmNoIGZvciBhIHN0dWRlbnQgYnkgSUQgb3IgbmFtZVxyXG5yb3V0ZXIuZ2V0KCcvc3R1ZGVudHMvc2VhcmNoJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHF1ZXJ5IH0gPSByZXEucXVlcnk7IC8vIFF1ZXJ5IHBhcmFtZXRlclxyXG5cclxuICAgIGlmICghcXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJRdWVyeSBwYXJhbWV0ZXIgaXMgcmVxdWlyZWRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYiA9IHJlYWREYXRhYmFzZSgpO1xyXG5cclxuICAgIC8vIFNlYXJjaCBmb3IgdGhlIHN0dWRlbnRcclxuICAgIGNvbnN0IHN0dWRlbnQgPSBkYi5zdHVkZW50cy5maW5kKHMgPT5cclxuICAgICAgICBzLnN0dWRlbnRJRC50b1N0cmluZygpID09PSBxdWVyeSB8fCBzLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXN0dWRlbnQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJObyBzdHVkZW50IGZvdW5kIHdpdGggdGhhdCBJRCBvciBuYW1lXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluZCBjbGFzc2VzIHRoZSBzdHVkZW50IGlzIGVucm9sbGVkIGluXHJcbiAgICBjb25zdCBzdHVkZW50Q2xhc3NlcyA9IGRiLmVucm9sbG1lbnRcclxuICAgICAgICAuZmlsdGVyKGUgPT4gZS5lbnJvbGxlZFN0dWRlbnRJRCA9PT0gc3R1ZGVudC5zdHVkZW50SUQpXHJcbiAgICAgICAgLm1hcChlID0+IGRiLmNsYXNzZXMuZmluZChjID0+IGMuY2xhc3NJRCA9PT0gZS5lbnJvbGxlZENsYXNzSUQpKVxyXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN0dWRlbnQsXHJcbiAgICAgICAgY2xhc3Nlczogc3R1ZGVudENsYXNzZXNcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiIwaEhBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxPQUFPLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQ2xDLEtBQU0sQ0FBQUMsTUFBTSxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBR0QsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxFQUMvQixLQUFNLENBQUFDLEVBQUUsRUFBQVAsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFDeEIsS0FBTSxDQUFBSSxJQUFJLEVBQUFSLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBRTVCO0FBQ0EsS0FBTSxDQUFBSyxNQUFNLEVBQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUFHSyxJQUFJLENBQUNFLElBQUksQ0FBQ0MsU0FBUyxDQUFFLGlCQUFpQixDQUFDLEVBRXREO0FBQ0EsUUFBUyxDQUFBQyxZQUFZQSxDQUFBLENBQUcsQ0FBQVosY0FBQSxHQUFBYSxDQUFBLE1BQ3BCLEtBQU0sQ0FBQUMsSUFBSSxFQUFBZCxjQUFBLEdBQUFHLENBQUEsTUFBR0ksRUFBRSxDQUFDUSxZQUFZLENBQUNOLE1BQU0sQ0FBRSxPQUFPLENBQUMsRUFBQ1QsY0FBQSxHQUFBRyxDQUFBLE1BQzlDLE1BQU8sQ0FBQWEsSUFBSSxDQUFDQyxLQUFLLENBQUNILElBQUksQ0FBQyxDQUMzQixDQUVBO0FBQUFkLGNBQUEsR0FBQUcsQ0FBQSxNQUNBRSxNQUFNLENBQUNhLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBRSxDQUFDQyxHQUFHLENBQUVDLEdBQUcsR0FBSyxDQUFBcEIsY0FBQSxHQUFBYSxDQUFBLE1BQ3pDLEtBQU0sQ0FBRVEsS0FBTSxDQUFDLEVBQUFyQixjQUFBLEdBQUFHLENBQUEsTUFBR2dCLEdBQUcsQ0FBQ0UsS0FBSyxFQUFFO0FBQUFyQixjQUFBLEdBQUFHLENBQUEsTUFFN0IsR0FBSSxDQUFDa0IsS0FBSyxDQUFFLENBQUFyQixjQUFBLEdBQUFzQixDQUFBLFNBQUF0QixjQUFBLEdBQUFHLENBQUEsT0FDUixNQUFPLENBQUFpQixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLEtBQUssQ0FBRSw2QkFBOEIsQ0FBQyxDQUFDLENBQ3pFLENBQUMsS0FBQXpCLGNBQUEsR0FBQXNCLENBQUEsVUFFRCxLQUFNLENBQUFJLEVBQUUsRUFBQTFCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHUyxZQUFZLENBQUMsQ0FBQyxFQUV6QjtBQUNBLEtBQU0sQ0FBQWUsT0FBTyxFQUFBM0IsY0FBQSxHQUFBRyxDQUFBLE9BQUd1QixFQUFFLENBQUNFLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDMUIsQ0FBQyxFQUM5QixDQUFBSCxjQUFBLEdBQUFhLENBQUEsTUFBQWIsY0FBQSxHQUFBRyxDQUFBLGNBQUFILGNBQUEsR0FBQXNCLENBQUEsU0FBQW5CLENBQUMsQ0FBQzJCLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsR0FBS1YsS0FBSyxJQUFBckIsY0FBQSxHQUFBc0IsQ0FBQSxTQUFJbkIsQ0FBQyxDQUFDNkIsSUFBSSxDQUFDQyxXQUFXLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUNiLEtBQUssQ0FBQ1ksV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFELENBQ3pGLENBQUMsRUFBQ2pDLGNBQUEsR0FBQUcsQ0FBQSxPQUVGLEdBQUksQ0FBQ3dCLE9BQU8sQ0FBRSxDQUFBM0IsY0FBQSxHQUFBc0IsQ0FBQSxTQUFBdEIsY0FBQSxHQUFBRyxDQUFBLE9BQ1YsTUFBTyxDQUFBaUIsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxLQUFLLENBQUUsdUNBQXdDLENBQUMsQ0FBQyxDQUNuRixDQUFDLEtBQUF6QixjQUFBLEdBQUFzQixDQUFBLFVBRUQ7QUFDQSxLQUFNLENBQUFhLGNBQWMsRUFBQW5DLGNBQUEsR0FBQUcsQ0FBQSxPQUFHdUIsRUFBRSxDQUFDVSxVQUFVLENBQy9CQyxNQUFNLENBQUNDLENBQUMsRUFBSSxDQUFBdEMsY0FBQSxHQUFBYSxDQUFBLE1BQUFiLGNBQUEsR0FBQUcsQ0FBQSxjQUFBbUMsQ0FBQyxDQUFDQyxpQkFBaUIsR0FBS1osT0FBTyxDQUFDRyxTQUFTLENBQUQsQ0FBQyxDQUFDLENBQ3REVSxHQUFHLENBQUNGLENBQUMsRUFBSSxDQUFBdEMsY0FBQSxHQUFBYSxDQUFBLE1BQUFiLGNBQUEsR0FBQUcsQ0FBQSxjQUFBdUIsRUFBRSxDQUFDZSxPQUFPLENBQUNaLElBQUksQ0FBQ2EsQ0FBQyxFQUFJLENBQUExQyxjQUFBLEdBQUFhLENBQUEsTUFBQWIsY0FBQSxHQUFBRyxDQUFBLGNBQUF1QyxDQUFDLENBQUNDLE9BQU8sR0FBS0wsQ0FBQyxDQUFDTSxlQUFlLENBQUQsQ0FBQyxDQUFDLENBQUQsQ0FBQyxDQUFDLENBQy9EUCxNQUFNLENBQUNRLE9BQU8sQ0FBQyxFQUFDN0MsY0FBQSxHQUFBRyxDQUFBLE9BRXJCaUIsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUNqQkcsT0FBTyxDQUNQYyxPQUFPLENBQUVOLGNBQ2IsQ0FBQyxDQUFDLENBQ04sQ0FBQyxDQUFDLENBQUNuQyxjQUFBLEdBQUFHLENBQUEsT0FFSDJDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHMUMsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==